This firmware is derived from JonnyC's dual_pwm/STAR_momentary firmware.  It is
intended for use on ATTINY13A-based drivers with an electronic / momentary
switch, such as the Skyray King or Supfire M6 (after replacing the driver).
Testing has primarily been done on an original SRK with a 32x7135 BLF driver.

By default, the interface is as follows:

  There are six constant brightness levels, plus an "off" mode.  Unless, of
  course, you modify it.

  Short taps: high-to-low

    - From off, tap the button (press and release quickly) to turn the light on
      in the highest mode.
    - While on, tap to lower the mode by one.  Keep tapping to go to lower and
      lower levels.  At the lowest mode, one tap will turn the light off.

  Long press / hold: low-to-high

    - From off, press and hold the button to turn the light on in the lowest
      mode.
    - Keep holding the button to cycle up through the modes in low-to-high
      order.  Cycling will stop when it reaches "off".
    - Release the button to stop at whatever level you like.
    - This works while the light is on, too.  It will go up in brightness while
      holding the button, then stop when the button is released.

  Battery check mode:

    To check the remaining battery charge, turn the light off then do one of
    the following:

      - Tap repeatedly until you get back to "off".
      - Or long-press to reach the first mode, then immediately tap to turn it
        off again.

    The light will then strobe its "moon" mode while reading the voltage, and
    then it should blink a few times to indicate the remaining battery charge:

      - 4 blinks: 4 "bars" / ~100% (~87% to 100% charged)
      - 3 blinks: 3 "bars" / ~75%  (~63% to ~87% charged)
      - 2 blinks: 2 "bars" / ~50%  (~37% to ~63% charged)
      - 1 blink : 1 "bar"  / ~25%  (~13% to ~37% charged)
      - 0 blinks: 0 "bars" / ~0%   (~0%  to ~13% charged)

    If you are using 4.35V cells, it could potentially blink 5 times when the
    batteries are full.

Additionally, each time the light powers up, it should blink once very briefly
to let you know the batteries are connected.

This firmware uses PWM to implement different brightness levels.  If you look
very very closely, you might notice different PWM speeds on different levels.
Most modes use "fast" ~18 kHz PWM, but the lowest modes use slower
"phase-correct" ~9 kHz PWM because it works better at low levels.  Both are
invisible to most people, but the slower one might create an audible
high-pitched tone.

There is also a bug of sorts, on some hardware.  After cycling through all
modes with a long press, the emitters might remain on at a very low level until
the button is released.  This is because the light does not fully power down
until you let go of the button, and some drivers might still send a small
amount of power out in this state.
